	USE DBCAMASTERAC

	//CREATE BRACKETTING FOR START AND END DATE
	DECLARE @DATE_EVENT_START DATETIME = CONVERT(DATETIME, DBSTARTTIME)
	DECLARE @DATE_EVENT_END DATETIME = CONVERT(DATETIME, DBENDDATE)

	SELECT
		CAST(EVENTS.EVENT_TIME_UTC AS DATE) AS ACCESS_DATE_UTC,
		CONVERT(VARCHAR(10),EVENTS.EVENT_TIME_UTC,108) AS ACCESS_TIME_UTC,
		READER.READERDESC AS DEVICE_ID,
		EVENTYPE.EVTDESCR AS EVENT_TYPE,
		EMP.FIRSTNAME AS FIRST_NAME,
		EMP.LASTNAME AS LAST_NAME,
		EVENTS.CARDNUM AS BADGE
	FROM
		EVENTS
			JOIN EVENTYPE
				ON EVENTS.EVENTTYPE = EVENTYPE.EVTYPEID
			JOIN BADGE
				ON EVENTS.CARDNUM = BADGE.ID
			JOIN EMP
				ON BADGE.EMPID = EMP.ID
			JOIN READER
				ON EVENTS.DEVID = READER.READERID
			AND EVENTS.MACHINE = READER.PANELID 
	WHERE
		EVENT_TIME_UTC >= @DATE_EVENT_START
			AND EVENT_TIME_UTC <= @DATE_EVENT_END
			AND (EVENTTYPE = 0) /*GRANTED*/

	ORDER BY ACCESS_DATE_UTC, ACCESS_TIME_UTC